 <div class="logSheet">    
    <p-dialog [(visible)]="isLfLogSheetDialog" showEffect="fade" [modal]="true" styleClass="p-fluid" [style]="{width: '130rem'}" [draggable]="true" (onHide)="clearData()">
        <p-header>
            <div>
                <span>Ladle Furnace Log Sheet</span>
            </div>
        </p-header>
        <ng-template pTemplate="content">
            <div>
                <p-table [value]="logSheetList" styleClass="p-datatable-sm p-datatable-gridlines p-datatable-striped"
                [tableStyle]="{'min-width': '20rem'}" [loading]="isMasterDataLoaded" selectionMode="single" [(selection)]="selectedData"  [scrollable]="true" scrollHeight="67vh">
                <ng-template pTemplate="header">
                    <tr>
                        <th rowspan="2" style="width: 3rem;">
                            Seq
                        </th>
                        <th rowspan="2" style="width: 8rem;">
                            Date
                        </th>
                        <th rowspan="2" style="width: 6rem;">
                            Heat No
                        </th>
                        <th rowspan="2" style="width: 5rem;">
                            Shift
                        </th>
                        <th rowspan="2" style="width: 5rem;">
                            Grade
                        </th>
                        <th rowspan="2" style="width: 6rem;">
                            Liq Temp (°C)
                        </th>
                        <th rowspan="2" style="width: 5rem;">
                            Type
                        </th>
                        <th rowspan="2" style="width: 6rem;">
                            TAS
                        </th>
                        <th rowspan="2" pTooltip="Net Liquid Steel Weight" style="width: 6rem;">
                            Weight (T)
                        </th>
                        <th rowspan="2" style="width: 6rem;">
                            Free Board (mm)
                        </th>
                        <th rowspan="2" style="width: 6rem;">
                            Size (mm)
                        </th>
                        <th colspan="7" class="text-center">
                            Ladle
                        </th>
                        <th rowspan="2" style="width: 1rem;"> </th>
                    </tr>
                    <tr>
                        <th pTooltip="Ladle In Time (Hrs)" style="width: 6rem;">
                            Time (Hrs)
                        </th>
                        <th pTooltip="Ladle In Temp (°C)" style="width: 6rem;">
                            Temp (°C)
                        </th>
                        <th style="width: 6rem;">
                            Arcing Time (mns)
                        </th>
                        <th style="width: 6rem;">
                            Argon Flow (LPM)
                        </th>
                        <th style="width: 6rem;">
                            Ar Consumption (I)
                        </th>
                        <th style="width: 5rem;">
                            Car No.
                        </th>
                        <th style="width: 6rem;">
                            LRF Process Time (mns)
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowData let-index="rowIndex">
                    <tr [pSelectableRow]="rowData" [pReorderableRow]="index">
                        <td class="text-center">
                           <span>{{index + 1}}</span>
                            <!-- <span class="pi pi-bars" pReorderableRowHandle></span> -->
                        </td>
                        <td>
                            {{rowData.date | date: 'dd/MM/YYYY'}}
                        </td>
                        <td>
                            {{rowData.heatNo}}
                        </td>
                        <td>
                            {{rowData.shiftName}}
                        </td>
                        <td>
                            {{rowData.gradeName}}
                        </td>
                        <td>
                            {{rowData.liqTemp}}
                        </td>
                        <td>
                            {{rowData.typeName}}
                        </td>
                        <td>
                            {{rowData.tas}}
                        </td>
                        <td>
                            {{rowData.weight}}
                        </td>
                        <td>
                            {{rowData.freeBoard}}
                        </td>
                        <td>
                            {{rowData.size}}
                        </td>
                        <td>
                            {{rowData.time | date: 'HH:mm'}}
                        </td>
                        <td>
                            {{rowData.ladleTemp}}
                        </td>
                        <td>
                            {{rowData.arcingTime}}
                        </td>
                        <td>
                            {{rowData.argonFlow}}
                        </td>
                        <td>
                            {{rowData.arConsumption}}
                        </td>
                        <td>
                            {{rowData.carNumber}}
                        </td>
                        <td>
                            {{rowData.lrfProcessTime}}
                        </td>
                        <td>
                            <button pButton pRipple  pTooltip="Remove" tooltipPosition="top" icon="pi pi-trash" class="p-button-danger p-button-sm" (click)="removeItem(index)"></button>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="footer">
                    <tr>
                        <td></td>
                        <td>
                            <p-calendar appendTo="body"  [disabled]="false" [(ngModel)]="dialogData.date" [showTime]="false" hourFormat="24" dateFormat="dd/mm/yy" [showSeconds]="false" inputId="time"></p-calendar>
                        </td>
                        <td>
                            <input pInputText type="text" [(ngModel)]="dialogData.heatNo" maxlength="10" />
                        </td>
                        <td>
                            <p-dropdown  [(ngModel)]="dialogData.shiftId" [showClear]="true" [options]="shift" placeholder="Shift" optionValue="id" optionLabel="name" appendTo="body" [style]="{'width':'100%'}" > </p-dropdown>           
                        </td>
                        <td>
                            <p-dropdown appendTo="body" [(ngModel)]="dialogData.steelGradeId" [options]="steelGradeList" [showClear]="true"  [filter]="true" filterBy="name" placeholder="Grade" [style]="{'width':'100%'}" optionLabel="name" optionValue="id">
                                <ng-template let-option pTemplate="item">
                                    <div>
                                        <span class="ml-1 mt-1">{{ option.name }} </span>
                                    </div>
                                </ng-template>
                            </p-dropdown>
                        </td>
                        <td>
                            <p-inputNumber [(ngModel)]="dialogData.liqTemp"  [showButtons]="false" [step]="0.01" mode="decimal" [maxFractionDigits]="2" locale="en-US" [useGrouping]="false"> </p-inputNumber>
                        </td>
                        <td>
                            <p-dropdown  [(ngModel)]="dialogData.gradeTypeId" [showClear]="true" [options]="GradeClassifyList" placeholder="Type" optionValue="id" optionLabel="name" appendTo="body" [style]="{'width':'100%'}" > </p-dropdown>           
                        </td>  
                        <td>
                            <input pInputText type="text" [(ngModel)]="dialogData.tas" maxlength="10" />
                        </td>  
                        <td>
                            <p-inputNumber [(ngModel)]="dialogData.weight"  [showButtons]="false" [step]="0.01" mode="decimal" [maxFractionDigits]="2" locale="en-US" [useGrouping]="false"> </p-inputNumber>
                        </td>
                        <td>
                            <p-inputNumber [(ngModel)]="dialogData.freeBoard"  [showButtons]="false" [step]="0.01" mode="decimal" [maxFractionDigits]="2" locale="en-US" [useGrouping]="false"> </p-inputNumber>
                        </td>                        
                        <td>
                            <p-inputNumber [(ngModel)]="dialogData.size"  [showButtons]="false" [step]="0.01" mode="decimal" [maxFractionDigits]="2" locale="en-US" [useGrouping]="false"> </p-inputNumber>
                        </td>
                        <td>
                            <p-calendar appendTo="body" [(ngModel)]="dialogData.time"  [showIcon]="false" [timeOnly]="true" inputId="templatedisplay"></p-calendar>
                        </td>
                        <td>
                            <p-inputNumber [(ngModel)]="dialogData.ladleTemp"  [showButtons]="false" [step]="0.01" mode="decimal" [maxFractionDigits]="2" locale="en-US" [useGrouping]="false"> </p-inputNumber>
                        </td>
                        <td>
                            <p-inputNumber [(ngModel)]="dialogData.arcingTime"  [showButtons]="false" [step]="0.01" mode="decimal" [maxFractionDigits]="2" locale="en-US" [useGrouping]="false"> </p-inputNumber>
                        </td>
                        <td>
                            <p-inputNumber [(ngModel)]="dialogData.argonFlow"  [showButtons]="false" [step]="0.01" mode="decimal" [maxFractionDigits]="2" locale="en-US" [useGrouping]="false"> </p-inputNumber>
                        </td>
                        <td>
                            <p-inputNumber [(ngModel)]="dialogData.arConsumption"  [showButtons]="false" [step]="0.01" mode="decimal" [maxFractionDigits]="2" locale="en-US" [useGrouping]="false"> </p-inputNumber>
                        </td>
                        <td>
                            <p-dropdown  [(ngModel)]="dialogData.carNo" [showClear]="true" [options]="CarNo" placeholder="No" optionValue="id" optionLabel="name" appendTo="body" [style]="{'width':'100%'}" > </p-dropdown>           
                        </td>
                        <td>
                            <p-inputNumber [(ngModel)]="dialogData.lrfProcessTime"  [showButtons]="false" [step]="0.01" mode="decimal" [maxFractionDigits]="2" locale="en-US" [useGrouping]="false"> </p-inputNumber>
                        </td> 
                        <td>
                            <button pButton pRipple pTooltip="Add New" tooltipPosition="top" icon="pi pi-plus" class="p-button-success p-button" (click)="addNewItem_to_List()"></button>
                        </td>
                    </tr>
                    <tr *ngIf="errorMessage">
                        <td colspan="5">
                            <small class="p-error">{{errorMessage}}</small>                    
                        </td>
                    </tr>
                </ng-template>
            </p-table>
                    </div>
        </ng-template>
        <ng-template pTemplate="footer">
            <button pButton pRipple label="update" icon="pi pi-check" class="p-button-outlined" ></button>
            <button pButton pRipple label="cancel" icon="pi pi-times" class="p-button-outlined" (click)="clearData()"></button>
        </ng-template>
    </p-dialog>
    
    <p-confirmDialog [style]="{width: '450px'}" icon="fa fa-question-circle" #cd>
        <p-footer>
            <button class="p-confirm-dialog-accept" type="button" pButton icon="fa-check" label="global.yes'" (click)="cd.accept()"></button>
            <button class="p-confirm-dialog-reject" type="button" pButton icon="fa-close" label="no" (click)="cd.reject()"></button>
        </p-footer>
    </p-confirmDialog>

    <!-- PROGRESS DIALOG -->
    <p-dialog [(visible)]="dlgProgress" header="progress' | translate" [style]="{width: '450px'}" [closable]="false" [modal]="true" styleClass="p-fluid" [draggable]="false">
        <ng-template pTemplate="content">
            <p-progressBar mode="indeterminate"></p-progressBar>
        </ng-template>
    </p-dialog>
</div>
